import{x as b,r as i,B as S,j as r,d as ne,e as se}from"./index-BSZbYeIo.js";import{c as O}from"./color.api-aT2JmztO.js";import{M as L,a as le}from"./ModalDelete-vB3FCUQe.js";import{b as V}from"./Product.interface-CXwrlzQj.js";import{P as ce}from"./ToggleSwitch-BIk6jceF.js";import{F as M,b as J}from"./schema.resolver-CpVR_5tH.js";import{o as Q}from"./index.esm-Dl2BMSFW.js";import{u as W}from"./index.esm-Cdf0US0c.js";function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e}).apply(this,arguments)}function Z(e,t){if(e==null)return{};var o,a,n={},s=Object.keys(e);for(a=0;a<s.length;a++)t.indexOf(o=s[a])>=0||(n[o]=e[o]);return n}function R(e){var t=i.useRef(e),o=i.useRef(function(a){t.current&&t.current(a)});return t.current=e,o.current}var H=function(e,t,o){return t===void 0&&(t=0),o===void 0&&(o=1),e>o?o:e<t?t:e},D=function(e){return"touches"in e},z=function(e){return e&&e.ownerDocument.defaultView||self},B=function(e,t,o){var a=e.getBoundingClientRect(),n=D(t)?function(s,c){for(var l=0;l<s.length;l++)if(s[l].identifier===c)return s[l];return s[0]}(t.touches,o):t;return{left:H((n.pageX-(a.left+z(e).pageXOffset))/a.width),top:H((n.pageY-(a.top+z(e).pageYOffset))/a.height)}},X=function(e){!D(e)&&e.preventDefault()},$=b.memo(function(e){var t=e.onMove,o=e.onKey,a=Z(e,["onMove","onKey"]),n=i.useRef(null),s=R(t),c=R(o),l=i.useRef(null),f=i.useRef(!1),d=i.useMemo(function(){var w=function(p){X(p),(D(p)?p.touches.length>0:p.buttons>0)&&n.current?s(B(n.current,p,l.current)):u(!1)},v=function(){return u(!1)};function u(p){var h=f.current,C=z(n.current),y=p?C.addEventListener:C.removeEventListener;y(h?"touchmove":"mousemove",w),y(h?"touchend":"mouseup",v)}return[function(p){var h=p.nativeEvent,C=n.current;if(C&&(X(h),!function(k,P){return P&&!D(k)}(h,f.current)&&C)){if(D(h)){f.current=!0;var y=h.changedTouches||[];y.length&&(l.current=y[0].identifier)}C.focus(),s(B(C,h,l.current)),u(!0)}},function(p){var h=p.which||p.keyCode;h<37||h>40||(p.preventDefault(),c({left:h===39?.05:h===37?-.05:0,top:h===40?.05:h===38?-.05:0}))},u]},[c,s]),g=d[0],j=d[1],N=d[2];return i.useEffect(function(){return N},[N]),b.createElement("div",F({},a,{onTouchStart:g,onMouseDown:g,className:"react-colorful__interactive",ref:n,onKeyDown:j,tabIndex:0,role:"slider"}))}),A=function(e){return e.filter(Boolean).join(" ")},G=function(e){var t=e.color,o=e.left,a=e.top,n=a===void 0?.5:a,s=A(["react-colorful__pointer",e.className]);return b.createElement("div",{className:s,style:{top:100*n+"%",left:100*o+"%"}},b.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},x=function(e,t,o){return t===void 0&&(t=0),o===void 0&&(o=Math.pow(10,t)),Math.round(o*e)/o},ie=function(e){return he(K(e))},K=function(e){return e[0]==="#"&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?x(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:e.length===8?x(parseInt(e.substring(6,8),16)/255,2):1}},de=function(e){return fe(me(e))},ue=function(e){var t=e.s,o=e.v,a=e.a,n=(200-t)*o/100;return{h:x(e.h),s:x(n>0&&n<200?t*o/100/(n<=100?n:200-n)*100:0),l:x(n/2),a:x(a,2)}},U=function(e){var t=ue(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},me=function(e){var t=e.h,o=e.s,a=e.v,n=e.a;t=t/360*6,o/=100,a/=100;var s=Math.floor(t),c=a*(1-o),l=a*(1-(t-s)*o),f=a*(1-(1-t+s)*o),d=s%6;return{r:x(255*[a,l,c,c,f,a][d]),g:x(255*[f,a,a,l,c,c][d]),b:x(255*[c,c,f,a,a,l][d]),a:x(n,2)}},I=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},fe=function(e){var t=e.r,o=e.g,a=e.b,n=e.a,s=n<1?I(x(255*n)):"";return"#"+I(t)+I(o)+I(a)+s},he=function(e){var t=e.r,o=e.g,a=e.b,n=e.a,s=Math.max(t,o,a),c=s-Math.min(t,o,a),l=c?s===t?(o-a)/c:s===o?2+(a-t)/c:4+(t-o)/c:0;return{h:x(60*(l<0?l+6:l)),s:x(s?c/s*100:0),v:x(s/255*100),a:n}},pe=b.memo(function(e){var t=e.hue,o=e.onChange,a=A(["react-colorful__hue",e.className]);return b.createElement("div",{className:a},b.createElement($,{onMove:function(n){o({h:360*n.left})},onKey:function(n){o({h:H(t+360*n.left,0,360)})},"aria-label":"Hue","aria-valuenow":x(t),"aria-valuemax":"360","aria-valuemin":"0"},b.createElement(G,{className:"react-colorful__hue-pointer",left:t/360,color:U({h:t,s:100,v:100,a:1})})))}),xe=b.memo(function(e){var t=e.hsva,o=e.onChange,a={backgroundColor:U({h:t.h,s:100,v:100,a:1})};return b.createElement("div",{className:"react-colorful__saturation",style:a},b.createElement($,{onMove:function(n){o({s:100*n.left,v:100-100*n.top})},onKey:function(n){o({s:H(t.s+100*n.left,0,100),v:H(t.v-100*n.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+x(t.s)+"%, Brightness "+x(t.v)+"%"},b.createElement(G,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:U(t)})))}),ee=function(e,t){if(e===t)return!0;for(var o in e)if(e[o]!==t[o])return!1;return!0},ge=function(e,t){return e.toLowerCase()===t.toLowerCase()||ee(K(e),K(t))};function ve(e,t,o){var a=R(o),n=i.useState(function(){return e.toHsva(t)}),s=n[0],c=n[1],l=i.useRef({color:t,hsva:s});i.useEffect(function(){if(!e.equal(t,l.current.color)){var d=e.toHsva(t);l.current={hsva:d,color:t},c(d)}},[t,e]),i.useEffect(function(){var d;ee(s,l.current.hsva)||e.equal(d=e.fromHsva(s),l.current.color)||(l.current={hsva:s,color:d},a(d))},[s,e,a]);var f=i.useCallback(function(d){c(function(g){return Object.assign({},g,d)})},[]);return[s,f]}var be=typeof window<"u"?i.useLayoutEffect:i.useEffect,je=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},Y=new Map,Ne=function(e){be(function(){var t=e.current?e.current.ownerDocument:document;if(t!==void 0&&!Y.has(t)){var o=t.createElement("style");o.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,Y.set(t,o);var a=je();a&&o.setAttribute("nonce",a),t.head.appendChild(o)}},[])},Ce=function(e){var t=e.className,o=e.colorModel,a=e.color,n=a===void 0?o.defaultColor:a,s=e.onChange,c=Z(e,["className","colorModel","color","onChange"]),l=i.useRef(null);Ne(l);var f=ve(o,n,s),d=f[0],g=f[1],j=A(["react-colorful",t]);return b.createElement("div",F({},c,{ref:l,className:j}),b.createElement(xe,{hsva:d,onChange:g}),b.createElement(pe,{hue:d.h,onChange:g,className:"react-colorful__last-control"}))},ye={defaultColor:"000",toHsva:ie,fromHsva:function(e){return de({h:e.h,s:e.s,v:e.v,a:1})},equal:ge},te=function(e){return b.createElement(Ce,F({},e,{colorModel:ye}))};const we=({color:e,setColor:t,handleCreateNew:o})=>{var N,w,v;const{handleSubmit:a,control:n,reset:s,getValues:c,setValue:l,formState:{errors:f}}=W({resolver:Q(J),mode:"onSubmit",defaultValues:{name:e.name,code:e.code,displayCode:e.displayCode}}),d=u=>{l("code",u),t({...e,code:u})},g=()=>{s(V),t(V)},j=async u=>{await o(u),g()};return i.useEffect(()=>{s({name:e.name,code:e.code,displayCode:e.displayCode})},[e,s]),i.useEffect(()=>{var p,h;const u=Object.values(f);if(u.length>0&&(p=u[0])!=null&&p.message){const C=(h=u[0])==null?void 0:h.message;S.error(C.toString(),{autoClose:1e3,pauseOnHover:!1,draggable:!0,delay:50})}},[f]),r.jsx("div",{className:"w-[800px]",children:r.jsx("div",{className:"bg-white mt-10 rounded-md px-10 pt-10 pb-5",children:r.jsxs("form",{onSubmit:a(j),children:[r.jsx("h1",{className:"font-bold text-2xl text-center",children:"Khởi tạo màu sắc"}),r.jsxs("div",{className:"text-right mt-10",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-10",children:[r.jsxs("div",{className:"text-left",children:[r.jsxs("label",{htmlFor:"",className:"text-lg font-semibold text-left",children:["Tên màu"," ",r.jsx("span",{className:"text-red-500",children:"(*)"})]}),r.jsx(M,{control:n,name:"name",id:"color-name",placeholder:"Nhập tên màu...",error:((N=f.name)==null?void 0:N.message)??"",onChange:u=>t({...e,name:u.target.value})})]}),r.jsxs("div",{className:"text-left",children:[r.jsxs("label",{htmlFor:"",className:"text-lg font-semibold text-left",children:["Mã hiển thị"," ",r.jsx("span",{className:"text-red-500",children:"(*)"})]}),r.jsx(M,{control:n,name:"displayCode",id:"color-displayCode",placeholder:"Nhập mã hiển thị...",error:((w=f.displayCode)==null?void 0:w.message)??"",onChange:u=>{t({...e,displayCode:u.target.value})}})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-10",children:[r.jsx(te,{className:"mt-5",color:e.code,onChange:d}),r.jsxs("div",{className:"text-left",children:[r.jsxs("label",{htmlFor:"",className:"text-lg font-semibold text-left",children:["Mã màu"," ",r.jsx("span",{className:"text-red-500",children:"(*)"})]}),r.jsx(M,{control:n,name:"code",id:"color-code",placeholder:"Nhập mã màu...",error:((v=f.code)==null?void 0:v.message)??"",maxLength:7,onChange:u=>t({...e,code:u.target.value})})]})]}),r.jsx("button",{type:"submit",className:"mt-10 font-semibold text-white bg-gradient-to-br from-orange-500 to-pink-500 hover:from-orange-600 hover:to-pink-600 px-4 py-2 rounded-md inline-block transition-all",children:"Thêm mới"})]})]})})})},_e=({color:e,handleUpdate:t})=>{var j,N,w;const{handleSubmit:o,control:a,setValue:n,formState:{errors:s},watch:c}=W({resolver:Q(J),mode:"onSubmit",defaultValues:{name:e.name,code:e.code,displayCode:e.displayCode}}),l=async v=>{await t(v)},f=v=>{n("code",v)},d=c(),g=()=>d.name===e.name&&d.code===e.code&&d.displayCode===e.displayCode;return i.useEffect(()=>{var u,p;const v=Object.values(s);if(v.length>0&&(u=v[0])!=null&&u.message){const h=(p=v[0])==null?void 0:p.message;S.error(h.toString(),{autoClose:1e3,pauseOnHover:!1,draggable:!0,delay:50})}},[s]),r.jsx("div",{className:"w-[800px]",children:r.jsx("div",{className:"bg-white mt-10 rounded-md px-10 pt-10 pb-5",children:r.jsxs("form",{onSubmit:o(l),children:[r.jsx("h1",{className:"font-bold text-2xl text-center",children:"Thông tin màu"}),r.jsxs("div",{className:"text-right mt-10",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-10",children:[r.jsxs("div",{className:"text-left",children:[r.jsxs("label",{htmlFor:"",className:"text-lg font-semibold text-left",children:["Tên màu"," ",r.jsx("span",{className:"text-red-500",children:"(*)"})]}),r.jsx(M,{control:a,name:"name",id:"color-name",placeholder:"Nhập tên màu...",error:((j=s.name)==null?void 0:j.message)??""})]}),r.jsxs("div",{className:"text-left",children:[r.jsxs("label",{htmlFor:"",className:"text-lg font-semibold text-left",children:["Mã hiển thị"," ",r.jsx("span",{className:"text-red-500",children:"(*)"})]}),r.jsx(M,{control:a,name:"displayCode",id:"color-displayCode",placeholder:"Nhập mã hiển thị...",error:((N=s.displayCode)==null?void 0:N.message)??""})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-10",children:[r.jsx(te,{className:"mt-5",color:e.code,onChange:f}),r.jsxs("div",{className:"text-left",children:[r.jsxs("label",{htmlFor:"",className:"text-lg font-semibold text-left",children:["Mã màu"," ",r.jsx("span",{className:"text-red-500",children:"(*)"})]}),r.jsx(M,{control:a,name:"code",id:"color-code",placeholder:"Nhập mã màu...",error:((w=s.code)==null?void 0:w.message)??"",maxLength:7})]})]}),r.jsx("button",{type:"submit",className:ne("mt-10 font-semibold px-4 py-2 rounded-md inline-block transition-all",g()?"bg-gray-300 text-gray-500 cursor-not-allowed":"text-white bg-gradient-to-br from-orange-500 to-pink-500 hover:from-orange-600 hover:to-pink-600 cursor-pointer"),disabled:g(),children:"Cập nhật"})]})]})})})},Ve=()=>{const[e,t]=i.useState(1),[o,a]=i.useState(1),[n,s]=i.useState([]),[c,l]=i.useState(!1),[f,d]=i.useState(V),[g,j]=i.useState(!1),[N,w]=i.useState(V),[v,u]=i.useState(!1),[p,h]=i.useState(""),C=m=>{t(m)},y=async()=>{const m=await O.getAllColors(e-1,5,"modifiedDate","");m.result&&(s(m.data.items),a(m.data.totalPages))},k=()=>{l(!c)},P=m=>{const _={id:"",name:m.name,code:m.code,displayCode:m.displayCode};O.createColor(_).then(E=>{E.result&&(k(),S.success("Create success!",{autoClose:1e3,pauseOnHover:!1,draggable:!0,delay:50}),y())})},re=m=>{const _={id:N.id,name:m.name,code:m.code,displayCode:m.displayCode};O.updateColor(_).then(E=>{E.result&&(q(),S.success("Update Success!",{autoClose:5e3,delay:50,draggable:!0,pauseOnHover:!1}),y())})},oe=m=>{w(m),j(!g)},q=()=>{j(!g)},ae=async m=>{u(!v),await O.deleteColor(m).then(_=>{_&&_.result&&(S.success("Delete Success!",{autoClose:5e3,delay:50,draggable:!0,pauseOnHover:!1}),y())})},T=()=>{u(!v)};return i.useEffect(()=>{y()},[e]),r.jsxs(r.Fragment,{children:[r.jsx(L,{isVisible:c,onClose:k,children:r.jsx("div",{children:r.jsx(we,{handleCreateNew:P,color:f,setColor:d})})}),r.jsx(L,{isVisible:g,onClose:q,children:r.jsx("div",{children:r.jsx(_e,{handleUpdate:re,color:N})})}),r.jsx(L,{isVisible:v,onClose:T,children:r.jsx(le,{id:p,handleDelete:ae,title:"Are you sure to delete this color?",onCloseDelModal:T})}),r.jsx("div",{className:"",children:r.jsxs("button",{className:"flex items-center text-black bg-white p-1 mx-8 my-2 rounded-2xl border border-gray-c4",onClick:k,children:[r.jsx(se,{}),r.jsx("span",{className:"flex items-center mr-2",children:"Thêm mới"})]})}),r.jsxs("div",{className:"",children:[r.jsx("div",{className:"p-5",children:r.jsx("div",{className:"overflow-x-auto rounded-2xl border mx-4 border-gray-c4 ",children:r.jsxs("table",{className:"bg-white w-full text-sm text-left text-gray-400",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"py-3 px-6",children:"Tên màu"}),r.jsx("th",{scope:"col",className:"px-6",children:"Mã màu"}),r.jsx("th",{scope:"col",className:"px-6",children:"Mã hiển thị"}),r.jsx("th",{scope:"col",className:"px-6 text-center",children:"Action"})]})}),r.jsx("tbody",{children:n.map((m,_)=>{var E;return r.jsxs("tr",{className:"bg-white border border-gray-c2 hover:bg-gray-c2 cursor-pointer",children:[r.jsx("th",{scope:"row",className:"py-4 px-6 font-medium text-black whitespace-nowrap",children:m.name}),r.jsx("th",{scope:"row",className:"py-4 px-6 font-bold text-black whitespace-nowrap",style:{color:m.code},children:(E=m.code)==null?void 0:E.toUpperCase()}),r.jsx("th",{scope:"row",className:"py-4 px-6 font-medium text-black ",children:m.displayCode}),r.jsx("th",{scope:"row",className:"py-4 px-6 font-medium text-black whitespace-nowrap",children:r.jsxs("div",{className:"text-center",children:[r.jsx("span",{className:"text-white hover:bg-white hover:text-black bg-success  rounded-lg px-2 mx-2",onClick:()=>{oe(m)},children:"Edit"}),r.jsx("span",{className:"text-white bg-warning rounded-lg px-2 hover:bg-white hover:text-black mx-2",onClick:()=>{h(m.id??""),T()},children:"Delete"})]})})]},_)})})]})})}),r.jsx("div",{className:"flex justify-center",children:r.jsx(ce,{showIcons:!0,currentPage:e,totalPages:o,onPageChange:C,layout:"pagination"})})]})]})};export{Ve as default};
