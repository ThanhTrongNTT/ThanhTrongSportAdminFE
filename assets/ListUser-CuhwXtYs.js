import{j as e,d as C,f as w,r as n,B as x}from"./index-Dt_T-83C.js";import{P as D}from"./ToggleSwitch-DNePLUHr.js";import{u as i}from"./user.api-C8HgcE0h.js";import{I as P}from"./ImageCustom-CvxMU4N2.js";import{M as y,a as U}from"./ModalDelete-38Et1fiI.js";const M=({id:o,setIdDelete:l,user:a,onCloseDel:m,handleActive:u})=>{var r,c,d;return e.jsxs("div",{className:"bg-white border-sm shadow-lg w-1/5 p-5 m-4 rounded-md",children:[e.jsx(P,{alt:"Test",src:((c=(r=a.userProfile)==null?void 0:r.avatar)==null?void 0:c.url)||"https://hd-book-store.vercel.app/images/db_bg.jpeg"}),e.jsxs("div",{className:"flex flex-col pt-5 pl-5 font-bold",children:[e.jsxs("h1",{children:["User Name:"," ",e.jsx("span",{className:"font-normal",children:a.userName})]}),e.jsxs("span",{children:["Email: ",e.jsx("span",{className:"font-normal",children:a.email})]}),e.jsxs("div",{className:"flex gap-x-10 items-center content-center",children:["Active:"," ",e.jsx("div",{className:C("w-5 h-5 rounded-full",a.activeFlag?"bg-green-400 border border-green-300":"bg-red-500 border border-red-300")})]}),e.jsxs("span",{children:["Full Name:"," ",e.jsx("span",{className:"font-normal",children:(d=a.userProfile)==null?void 0:d.name})]})]}),e.jsxs("div",{className:"flex justify-between font-bold p-5",children:[e.jsx("button",{className:"p-1 bg-blue-300  rounded-md hover:bg-blue-500",onClick:()=>u(a),children:"Active"}),e.jsx("button",{className:"p-1 bg-red-300  rounded-md hover:bg-red-500",onClick:()=>{l(o),m()},children:"Delete"})]})]})},k=()=>{const{userInfo:o}=w(s=>s.user),[l,a]=n.useState(1),[m,u]=n.useState(1),[r,c]=n.useState(!1),[d,f]=n.useState([]),[p,j]=n.useState(""),g=async s=>{await i.getUsers(s-1,5,"id","asc").then(t=>{f(t.data.items),u(t.data.totalPages)})},b=s=>{a(s)},h=()=>{c(!r)},v=async s=>{c(!r),await i.deleteUser(s,(o==null?void 0:o.id)||"").then(t=>{t.result&&x.success("Xóa thành công!",{autoClose:500,delay:50,draggable:!0,pauseOnHover:!1})}),g(l)},N=async s=>{s.activeFlag?await i.deactiveUser(s).then(t=>{t.data&&x.success("Deactive User success!",{autoClose:500,delay:50,draggable:!0,pauseOnHover:!1})}):await i.activeUser(s).then(t=>{t.data&&x.success("Active User success!",{autoClose:500,delay:50,draggable:!0,pauseOnHover:!1})}),g(l)};return n.useEffect(()=>{g(l)},[l]),e.jsxs(e.Fragment,{children:[e.jsx(y,{isVisible:r,onClose:h,children:e.jsx(U,{id:p,handleDelete:v,title:"Bạn có chắc là muốn xóa người dùng này?",onCloseDelModal:h})}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:"flex flex-wrap",children:d.map(s=>e.jsx(M,{user:s,id:s.id||"",setIdDelete:j,onCloseDel:h,handleActive:N},s.id))}),e.jsx("div",{className:"flex justify-center",children:e.jsx(D,{showIcons:!0,currentPage:l,totalPages:m,onPageChange:b})})]})]})};export{k as default};
